{"is_source_file": true, "format": "Python", "description": "The file is a FastAPI-based backend API implementation for a notes management system, including database setup with SQLAlchemy, data models (both ORM and Pydantic), and CRUD REST endpoints for notes.", "external_files": ["fastapi", "sqlalchemy", "pydantic", "os", "datetime", "typing"], "external_methods": ["fastapi.FastAPI", "fastapi.HTTPException", "fastapi.Path", "fastapi.status", "fastapi.Depends", "fastapi.middleware.cors.CORSMiddleware", "pydantic.BaseModel", "pydantic.Field", "sqlalchemy.create_engine", "sqlalchemy.Column", "sqlalchemy.Integer", "sqlalchemy.String", "sqlalchemy.Text", "sqlalchemy.DateTime", "sqlalchemy.orm.sessionmaker", "sqlalchemy.orm.declarative_base", "sqlalchemy.orm.Session"], "published": ["app"], "classes": [{"name": "NoteORM", "description": "SQLAlchemy ORM model representing the notes table, with fields for id, title, content, created_at, and updated_at."}, {"name": "NoteBase", "description": "Pydantic model for common note fields, used in request validation."}, {"name": "NoteCreate", "description": "Pydantic model inheriting from NoteBase, used for creating new notes."}, {"name": "NoteUpdate", "description": "Pydantic model for updating notes partially or fully, with optional fields."}, {"name": "NoteOut", "description": "Pydantic model for outputting note details, including id and timestamps, with config to use ORM object's attributes."}], "methods": [{"name": "get_db()", "description": "Provides a database session, properly closing it after use.", "scope": "", "scopeKind": ""}, {"name": "health_check()", "description": "Health check endpoint returning a static message.", "scope": "", "scopeKind": ""}, {"name": "NoteOut create_note(payload: NoteCreate, db: Session = Depends(get_db))", "description": "Creates a new note record in the database and returns it.", "scope": "", "scopeKind": ""}, {"name": "List[NoteOut] list_notes(db: Session = Depends(get_db))", "description": "Returns a list of all notes, sorted by most recently updated.", "scope": "", "scopeKind": ""}, {"name": "NoteOut get_note( note_id: int = Path(..., ge=1, description=\"ID of the note to retrieve\"), db: Session = Depends(get_db), )", "description": "Retrieves a specific note by ID, or raises a 404 if not found.", "scope": "", "scopeKind": ""}, {"name": "NoteOut update_note_put( payload: NoteCreate, note_id: int = Path(..., ge=1, description=\"ID of the note to update\"), db: Session = Depends(get_db), )", "description": "Replaces all fields of a note identified by ID.", "scope": "", "scopeKind": ""}, {"name": "NoteOut update_note_patch( payload: NoteUpdate, note_id: int = Path(..., ge=1, description=\"ID of the note to update\"), db: Session = Depends(get_db), )", "description": "Partially updates fields of a note identified by ID.", "scope": "", "scopeKind": ""}, {"name": "delete_note( note_id: int = Path(..., ge=1, description=\"ID of the note to delete\"), db: Session = Depends(get_db), )", "description": "Deletes a note by ID, returning 204 no content.", "scope": "", "scopeKind": ""}, {"name": "on_startup()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["Base.metadata.create_all", "db.query", "db.add", "db.commit", "db.refresh", "db.delete"], "search-terms": ["FastAPI notes API", "SQLAlchemy ORM model", "database setup SQLite", "CRUD endpoints", "depends get_db", "Health check"], "state": 2, "file_id": 4, "knowledge_revision": 10, "git_revision": "82c1c7d4ac8df9e6268e2a9cb33ce2778496b796", "revision_history": [{"9": "aa902a176be14ae0c96a7fdd4c29bd1f6589981f"}, {"10": "82c1c7d4ac8df9e6268e2a9cb33ce2778496b796"}], "ctags": [{"_type": "tag", "name": "BASE_DIR", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^BASE_DIR = os.path.dirname(os.path.abspath(__file__))$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "Base", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^Base = declarative_base()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "Config", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^    class Config:$/", "language": "Python", "kind": "class", "scope": "NoteOut", "scopeKind": "class"}, {"_type": "tag", "name": "DATABASE_URL", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^DATABASE_URL = f\"sqlite:\\/\\/\\/{os.path.join(DB_DIR, 'notes.db')}\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "DB_DIR", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^DB_DIR = os.path.abspath(os.path.join(BASE_DIR, \"..\", \"..\", \"data\"))$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "NoteBase", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^class NoteBase(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NoteCreate", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^class NoteCreate(NoteBase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NoteORM", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^class NoteORM(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NoteOut", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^class NoteOut(NoteBase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NoteUpdate", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^class NoteUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SessionLocal", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^    __tablename__ = \"notes\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "NoteORM", "scopeKind": "class"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^    content = Column(Text, nullable=False)$/", "language": "Python", "kind": "variable", "scope": "NoteORM", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^    content: Optional[str] = Field(None, min_length=1, description=\"Updated content of the note\"/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "NoteUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^    content: str = Field(..., min_length=1, description=\"Content body of the note\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteBase", "scopeKind": "class"}, {"_type": "tag", "name": "create_note", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^def create_note(payload: NoteCreate, db: Session = Depends(get_db)) -> NoteOut:$/", "language": "Python", "typeref": "typename:NoteOut", "kind": "function", "signature": "(payload: NoteCreate, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^    created_at = Column(DateTime, nullable=False, default=datetime.utcnow)$/", "language": "Python", "kind": "variable", "scope": "NoteORM", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^    created_at: datetime = Field(..., description=\"Creation timestamp\")$/", "language": "Python", "typeref": "typename:datetime", "kind": "variable", "scope": "NoteOut", "scopeKind": "class"}, {"_type": "tag", "name": "delete_note", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^def delete_note($/", "language": "Python", "kind": "function", "signature": "( note_id: int = Path(..., ge=1, description=\"ID of the note to delete\"), db: Session = Depends(get_db), )"}, {"_type": "tag", "name": "engine", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^engine = create_engine($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "from_attributes", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^        from_attributes = True$/", "language": "Python", "kind": "variable", "scope": "NoteOut.Config", "scopeKind": "class"}, {"_type": "tag", "name": "get_db", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^def get_db():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_note", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^def get_note($/", "language": "Python", "typeref": "typename:NoteOut", "kind": "function", "signature": "( note_id: int = Path(..., ge=1, description=\"ID of the note to retrieve\"), db: Session = Depends(get_db), )"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^def health_check():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^    id = Column(Integer, primary_key=True, index=True)$/", "language": "Python", "kind": "variable", "scope": "NoteORM", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^    id: int = Field(..., description=\"Unique identifier for the note\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "NoteOut", "scopeKind": "class"}, {"_type": "tag", "name": "list_notes", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^def list_notes(db: Session = Depends(get_db)) -> List[NoteOut]:$/", "language": "Python", "typeref": "typename:List[NoteOut]", "kind": "function", "signature": "(db: Session = Depends(get_db))"}, {"_type": "tag", "name": "on_startup", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^def on_startup():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^    title = Column(String(255), nullable=False)$/", "language": "Python", "kind": "variable", "scope": "NoteORM", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^    title: Optional[str] = Field(None, min_length=1, max_length=255, description=\"Updated title /", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "NoteUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^    title: str = Field(..., min_length=1, max_length=255, description=\"Short title of the note\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteBase", "scopeKind": "class"}, {"_type": "tag", "name": "update_note_patch", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^def update_note_patch($/", "language": "Python", "typeref": "typename:NoteOut", "kind": "function", "signature": "( payload: NoteUpdate, note_id: int = Path(..., ge=1, description=\"ID of the note to update\"), db: Session = Depends(get_db), )"}, {"_type": "tag", "name": "update_note_put", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^def update_note_put($/", "language": "Python", "typeref": "typename:NoteOut", "kind": "function", "signature": "( payload: NoteCreate, note_id: int = Path(..., ge=1, description=\"ID of the note to update\"), db: Session = Depends(get_db), )"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^    updated_at = Column(DateTime, nullable=False, default=datetime.utcnow)$/", "language": "Python", "kind": "variable", "scope": "NoteORM", "scopeKind": "class"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-223030-223059/notes_backend/src/api/main.py", "pattern": "/^    updated_at: datetime = Field(..., description=\"Last update timestamp\")$/", "language": "Python", "typeref": "typename:datetime", "kind": "variable", "scope": "NoteOut", "scopeKind": "class"}], "hash": "7375a4aae27c94e2b0fbf990825b883a", "format-version": 4, "code-base-name": "notes_backend", "filename": "notes_backend/src/api/main.py", "fields": [{"name": "BASE_DIR = os.path.dirname(os.path.abspath(__file__))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Base = declarative_base()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DATABASE_URL = f\"sqlite:\\/\\/\\/{os.path.join(DB_DIR, 'notes.db')}\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DB_DIR = os.path.abspath(os.path.join(BASE_DIR, \"..\", \"..\", \"data\"))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "__tablename__ = \"notes\"", "scope": "NoteORM", "scopeKind": "class", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "content = Column(Text, nullable=False)", "scope": "NoteORM", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] content", "scope": "NoteUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "str content", "scope": "NoteBase", "scopeKind": "class", "description": "unavailable"}, {"name": "created_at = Column(DateTime, nullable=False, default=datetime.utcnow)", "scope": "NoteORM", "scopeKind": "class", "description": "unavailable"}, {"name": "datetime created_at", "scope": "NoteOut", "scopeKind": "class", "description": "unavailable"}, {"name": "engine = create_engine(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "from_attributes = True", "scope": "NoteOut.Config", "scopeKind": "class", "description": "unavailable"}, {"name": "id = Column(Integer, primary_key=True, index=True)", "scope": "NoteORM", "scopeKind": "class", "description": "unavailable"}, {"name": "int id", "scope": "NoteOut", "scopeKind": "class", "description": "unavailable"}, {"name": "title = Column(String(255), nullable=False)", "scope": "NoteORM", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] title", "scope": "NoteUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "str title", "scope": "NoteBase", "scopeKind": "class", "description": "unavailable"}, {"name": "updated_at = Column(DateTime, nullable=False, default=datetime.utcnow)", "scope": "NoteORM", "scopeKind": "class", "description": "unavailable"}, {"name": "datetime updated_at", "scope": "NoteOut", "scopeKind": "class", "description": "unavailable"}]}